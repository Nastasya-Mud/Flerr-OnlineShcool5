# Flerr Online School

Production-ready –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª—ã —Ñ–ª–æ—Ä–∏—Å—Ç–∏–∫–∏ —Å –≤–∏–¥–µ–æ—É—Ä–æ–∫–∞–º–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤.

## üé® –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Frontend
- React 18 + TypeScript
- Tailwind CSS + shadcn/ui
- Framer Motion
- React Router
- Axios

### Backend
- Node.js + Express
- MongoDB + Mongoose
- JWT Authentication
- AWS S3 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- MongoDB 6+
- S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (AWS S3, Backblaze B2, MinIO –∏ —Ç.–¥.)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd flerr-online-school
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
```bash
cp .env.example .env
```

4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ MongoDB –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB Atlas

6. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```bash
npm run seed
```

7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
npm run dev
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3000`
Backend API –Ω–∞ `http://localhost:5000`

### –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Å–ª–µ seed)

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- Email: admin@flerr.ru
- Password: admin123

**–°—Ç—É–¥–µ–Ω—Ç:**
- Email: student@flerr.ru
- Password: student123

**–ü—Ä–æ–º–æ–∫–æ–¥—ã:**
- `WELCOME2024` - –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
- `FLOWERS101` - –∫—É—Ä—Å "–û—Å–Ω–æ–≤—ã —Ñ–ª–æ—Ä–∏—Å—Ç–∏–∫–∏"

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
flerr-online-school/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ web/              # Frontend React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/      # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/   # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ domain/ # –î–æ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/ # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/      # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles/   # –°—Ç–∏–ª–∏ –∏ —Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ server/           # Backend Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ modules/  # API –º–æ–¥—É–ª–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ db/       # MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ package.json          # Root package.json
‚îî‚îÄ‚îÄ README.md
```

## üé® –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞
- **Accent Red**: `#A50C0A` - –∫–Ω–æ–ø–∫–∏, –∞–∫—Ü–µ–Ω—Ç—ã
- **Warm Brown**: `#9C7750` - –≤—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç
- **Sand**: `#E5CD9F` - –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
- **Light Cream**: `#F8EAC8` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω
- **Deep Green**: `#333A1A` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç

### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
- –ó–∞–≥–æ–ª–æ–≤–∫–∏: Inter/Outfit (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥—Ä–æ—Ç–µ—Å–∫)
- –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç: Inter —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

## üîí –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É.

### –¢–∏–ø—ã –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- **platform** - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫—É—Ä—Å–∞–º
- **course** - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫—É—Ä—Å—É

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (expires_at)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π (max_uses)
- –°—Ç–∞—Ç—É—Å (active/paused/expired)
- –°—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–π

## üìπ –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–µ–æ

–í–∏–¥–µ–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –∑–∞—â–∏—â–µ–Ω—ã:
1. –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ S3 –∑–∞–∫—Ä—ã—Ç
2. Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ URL (valid 1 hour)
3. –î–æ—Å—Ç—É–ø –≤—ã–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞
4. –í–∏–¥–µ–æ –æ—Ç–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CDN –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT Access + Refresh —Ç–æ–∫–µ–Ω—ã
- HTTP-only cookies –¥–ª—è refresh token
- Rate limiting –Ω–∞ auth –∏ promo endpoints
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å Zod
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è production –¥–æ–º–µ–Ω–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force –∞—Ç–∞–∫

## üì¶ –î–µ–ø–ª–æ–π –Ω–∞ Render

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ MongoDB
–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MongoDB Atlas –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç–∏–Ω–≥.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ S3
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ S3 bucket –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Backblaze B2, MinIO).

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Render

#### Backend Service
1. New ‚Üí Web Service
2. Connect repository
3. Settings:
   - Name: `flerr-server`
   - Environment: `Node`
   - Build Command: `npm install && npm run build:server`
   - Start Command: `npm start`
   - Root Directory: `apps/server`

4. Environment Variables:
   - –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.example`

#### Frontend Service
1. New ‚Üí Static Site
2. Connect repository
3. Settings:
   - Name: `flerr-web`
   - Build Command: `cd apps/web && npm install && npm run build`
   - Publish Directory: `apps/web/dist`

4. Environment Variables:
   - `VITE_API_URL` = URL –≤–∞—à–µ–≥–æ backend —Å–µ—Ä–≤–∏—Å–∞

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ü—Ä–∏–≤—è–∂–∏—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω –∫ Render —Å–µ—Ä–≤–∏—Å–∞–º.

### 5. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ seed —Å–∫—Ä–∏–ø—Ç —á–µ—Ä–µ–∑ Render Shell:
```bash
npm run seed
```

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–µ–º shadcn/ui CLI:
```bash
cd apps/web
npx shadcn-ui@latest add button
```

### API Endpoints

#### Auth
- `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –≤—Ö–æ–¥
- `POST /api/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `POST /api/auth/forgot` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- `POST /api/auth/reset` - —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

#### Courses
- `GET /api/courses` - —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤
- `GET /api/courses/:slug` - –¥–µ—Ç–∞–ª–∏ –∫—É—Ä—Å–∞
- `POST /api/courses` - —Å–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å [admin]
- `PATCH /api/courses/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å [admin]
- `DELETE /api/courses/:id` - —É–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å [admin]

#### Lessons
- `GET /api/courses/:courseSlug/lessons` - —É—Ä–æ–∫–∏ –∫—É—Ä—Å–∞
- `GET /api/lessons/:id` - –¥–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞ + signed URL
- `POST /api/lessons` - —Å–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ [admin]
- `PATCH /api/lessons/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —É—Ä–æ–∫ [admin]
- `POST /api/progress` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

#### Promo Codes
- `POST /api/promo/validate` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥
- `POST /api/promo/activate` - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- `GET /api/promo` - —Å–ø–∏—Å–æ–∫ –∫–æ–¥–æ–≤ [admin]
- `POST /api/promo` - —Å–æ–∑–¥–∞—Ç—å –∫–æ–¥ [admin]

#### Search
- `GET /api/search?q=...&filters=...` - –ø–æ–∏—Å–∫

#### Admin
- `GET /api/admin/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `POST /api/uploads/s3-sign` - pre-signed URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

## üìù License

Private - All rights reserved

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å: support@flerr.ru

